# Story 1.14: Access Basic Player Statistics and NFL News

## Status: Approved

## Epic: 1 - Core Platform Foundation & League Engagement MVP

## Story

- As a logged-in user, I want to be able to access basic player statistics and relevant NFL news (from static PoC datasets) so that I can make informed decisions about my fantasy team.

## Acceptance Criteria (ACs)

1.  Users can access individual player profiles or information views (e.g., via a modal triggered by clicking a player's name, or a dedicated player page like `app/(main)/player/[playerId]/page.tsx`).
2.  Player profiles/views display information sourced from the static `NFLPlayer` data model (`Architecture.md`), including: `fullName`, `position`, `nflTeamAbbreviation`, `status`, `projectedPoints`, and `keyAttributes` (e.g., consistencyRating, upsidePotential, role).
3.  (PoC Scope) Basic NFL news/notes relevant to players, if included in the `notes` field of the static `NFLPlayer` data, are displayed on their profile/view.
4.  Player information is easily accessible from various points in the application where player names are displayed (e.g., Roster page (Story 1.9), Waiver Wire (Story 1.11), Draft Room (Story 1.8), Lineup page (Story 1.10)).
5.  The displayed statistics and news clearly indicate they are sourced from the PoC static dataset.
6.  If a specific player is selected or navigated to, their correct and full information is loaded and displayed.

## Tasks / Subtasks

- [ ] **Task 1: Backend - API Endpoint for Player Details (`GET /api/players/[playerId]`)**
    - [ ] Create API Route Handler (e.g., `app/api/players/[playerId]/route.ts`).
    - [ ] Implement logic to retrieve the specific `NFLPlayer` record from the SQLite database based on the `playerId` path parameter.
    - [ ] Return the full `NFLPlayer` object.
    - [ ] Apply core API middleware.
- [ ] **Task 2: Frontend - Player Profile/Details UI (Modal or Page)**
    - [ ] **Subtask 2.1:** Decide on UI approach (modal for quick views vs. dedicated page `app/(main)/player/[playerId]/page.tsx` for more details). For PoC, a modal might be sufficient and easier to integrate in multiple places.
    - [ ] **Subtask 2.2:** Prompt v0.io (or similar) to generate the initial UI structure for the chosen approach (modal or page) to display all fields from the `NFLPlayer` model (fullName, position, team, status, projectedPoints, keyAttributes, notes).
    - [ ] **Subtask 2.3:** Review and adapt generated code. Ensure adherence to `Frontend-Architecture.md`.
    - [ ] **Subtask 2.4:** Implement logic to fetch player details from `/api/players/[playerId]` when the modal/page is opened/navigated to with a `playerId`.
    - [ ] **Subtask 2.5:** Display all fetched player information clearly.
    - [ ] **Subtask 2.6:** Handle loading states and errors from the API.
- [ ] **Task 3: Frontend - Integration of Player Profile Access**
    - [ ] On pages/components displaying player names/cards (Roster, Waivers, Draft Room, Lineup), implement functionality (e.g., making player names clickable) to trigger the display of the Player Profile/Details UI (modal or navigation to page) for the selected player.
    - [ ] Ensure the correct `playerId` is passed to the profile UI component/route.
- [ ] **Task 4: (Optional) Backend - Player Search/Filter API Endpoint (`GET /api/players?search=[query]&position=[pos]`)**
    - [ ] If not already covered by `GET /api/leagues/[leagueId]/available-players` (Story 1.11) for general player Browse, consider if a more generic player search endpoint is needed for PoC. For now, assume existing player lists are sufficient, and this is primarily about viewing details of an *already identified* player.
- [ ] **Task 5: Testing**
    - [ ] Unit tests for backend player data retrieval logic.
    - [ ] Unit tests for the frontend Player Profile/Details UI component.
    - [ ] Integration test for the `/api/players/[playerId]` API endpoint.
    - [ ] E2E test for: clicking a player from a list (e.g., roster or waiver wire) and verifying their detailed information is correctly displayed in the modal/page.

## Dev Technical Guidance

- **Backend:**
    - Refer to `Architecture.md` for the `NFLPlayer` data model.
    - The API endpoint is straightforward: fetch a single player by ID.
- **Frontend:**
    - Leverage the v0.io prompt for the initial UI of the player detail view (modal or page).
    * The `DraftPlayerCard.tsx` (from Story 1.8 / v0.io prompt) might serve as a compact view; this story is about a *more detailed* view.
    * If using a modal, ensure it's accessible and handles focus correctly as per `Frontend-Architecture.md#accessibility-ax-implementation-details`.
    * Consistent display of player information across different parts of the app is important.
- **Data:** Ensure the `NFLPlayer` static data in `nfl-players.json` has all fields (`status`, `projectedPoints`, `keyAttributes`, `notes`) well-populated for a good number of players to make viewing their profiles meaningful.

## Story Progress Notes

### Agent Model Used: `<To be filled by Dev Agent>`

### Completion Notes List

{To be filled by Dev Agent}

### Change Log

| Change                                    | Date       | Version | Description                                     | Author     |
| :---------------------------------------- | :--------- | :------ | :---------------------------------------------- | :--------- |
| Formalized by PO                          | 2025-05-31 | 0.1     | Initial formalization                           | Sarah (PO) |
| Prepared for Dev by SM                    | 2025-06-01 | 1.0     | Added detailed tasks, v0.io step, tech guidance | Bob (SM)   |